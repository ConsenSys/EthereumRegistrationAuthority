package tech.pegasys.era;

import org.web3j.protocol.core.RemoteCall;
import tech.pegasys.era.internal.AutoGeneratedDomainInfo;

/**
 * DomainInfo Java Wrapper Class.
 */
public class DomainInfo {

    private RemoteCall<AutoGeneratedDomainInfo> domainInfoAutoGenWrapper;
    private AutoGeneratedDomainInfo domainInfoAutoGenWrapperReal;

    public DomainInfo(RemoteCall<AutoGeneratedDomainInfo> domainInfoAutoGenWrapper) {
        this.domainInfoAutoGenWrapper = domainInfoAutoGenWrapper;
    }

    public boolean isReady() {
        return domainInfoAutoGenWrapperReal != null;
    }

    public void waitUntilReady() {
        // Convert from RemoteCall to Concrete Class
        while (true) {
            try {
                domainInfoAutoGenWrapperReal = domainInfoAutoGenWrapper.send();
                break;
            } catch (Exception e) {
            }
        }
    }
}
